/*
 * Copyright 2004-2008 Sun Microsystems, Inc. All Rights Reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER
 * 
 * This code is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2
 * only, as published by the Free Software Foundation.
 * 
 * This code is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * General Public License version 2 for more details (a copy is
 * included in the LICENSE file that accompanied this code).
 * 
 * You should have received a copy of the GNU General Public License
 * version 2 along with this work; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
 * 02110-1301 USA
 * 
 * Please contact Sun Microsystems, Inc., 16 Network Circle, Menlo
 * Park, CA 94025 or visit www.sun.com if you need additional
 * information or have any questions.
 */

/* **** GENERATED FILE -- DO NOT EDIT ****
 *      generated by com.sun.cldc.jna.JNAGen
 */

#include <stddef.h>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>

static FILE* out;

void printCopyright() {
    fprintf(out, "/*\n");
    fprintf(out, " * Copyright 2004-2008 Sun Microsystems, Inc. All Rights Reserved.\n");
    fprintf(out, " * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER\n");
    fprintf(out, " * \n");
    fprintf(out, " * This code is free software; you can redistribute it and/or modify\n");
    fprintf(out, " * it under the terms of the GNU General Public License version 2\n");
    fprintf(out, " * only, as published by the Free Software Foundation.\n");
    fprintf(out, " * \n");
    fprintf(out, " * This code is distributed in the hope that it will be useful, but\n");
    fprintf(out, " * WITHOUT ANY WARRANTY; without even the implied warranty of\n");
    fprintf(out, " * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n");
    fprintf(out, " * General Public License version 2 for more details (a copy is\n");
    fprintf(out, " * included in the LICENSE file that accompanied this code).\n");
    fprintf(out, " * \n");
    fprintf(out, " * You should have received a copy of the GNU General Public License\n");
    fprintf(out, " * version 2 along with this work; if not, write to the Free Software\n");
    fprintf(out, " * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n");
    fprintf(out, " * 02110-1301 USA\n");
    fprintf(out, " * \n");
    fprintf(out, " * Please contact Sun Microsystems, Inc., 16 Network Circle, Menlo\n");
    fprintf(out, " * Park, CA 94025 or visit www.sun.com if you need additional\n");
    fprintf(out, " * information or have any questions.\n");
    fprintf(out, " */\n");
    fprintf(out, "\n");
    fprintf(out, "/* **** GENERATED FILE -- DO NOT EDIT ****\n");
    fprintf(out, " *      generated by com.sun.cldc.jna.JNAGen\n");
    fprintf(out, " *      from the CLDC/JNA Interface class com.sun.cldc.jna.JNAPlatform\n");
    fprintf(out, " */\n");
    fprintf(out, "\n");
}

char* getGetter(int size) {
    switch (size) {
        case 1: return "getByte";
        case 2: return "getShort";
        case 4: return "getInt";
        case 8: return "getLong";
        default: exit(1);
    }
}

char* getSetter(int size) {
    switch (size) {
        case 1: return "setByte";
        case 2: return "setShort";
        case 4: return "setInt";
        case 8: return "setLong";
        default: exit(1);
    }
}

char* actualJavaType(int size) {
    switch (size) {
        case 1: return "byte";
        case 2: return "short";
        case 4: return "int";
        case 8: return "long";
        default: exit(1);
    }
}

#define SIZEOF(s,m) ((size_t) sizeof(((s *)0)->m))
int main(int argc, char *argv[]) {
    if (argc < 2) {
        fprintf(stderr, "Usage <cmd> out_file_name\n");
        exit(1);
    }

    chmod(argv[1], 0222);
    out = fopen(argv[1], "w");
    if (out == NULL) {
        fprintf(stderr, "File create failed for %s, errno = %d\n", argv[1], errno);
        exit(1);
    }

    printCopyright();

    fprintf(out, "package com.sun.cldc.jna;\n");
    fprintf(out, "\n");
    fprintf(out, "import com.sun.cldc.jna.*;\n");
    fprintf(out, "import com.sun.cldc.jna.ptr.*;\n");
    fprintf(out, "\n");

    fprintf(out, "public class JNAPlatformImpl implements JNAPlatform {\n");
    fprintf(out, "\n");

    fprintf(out, "    /*----------------------------- defines -----------------------------*/\n");
    fprintf(out, "\n");
#ifdef __APPLE__
    fprintf(out, "    public final static boolean __APPLE__ = true;\n");
#else
    fprintf(out, "    public final static boolean __APPLE__ = false;\n");
#endif
#ifdef sun
    fprintf(out, "    public final static boolean sun = true;\n");
#else
    fprintf(out, "    public final static boolean sun = false;\n");
#endif
#ifdef VXWORKS
    fprintf(out, "    public final static boolean VXWORKS = true;\n");
#else
    fprintf(out, "    public final static boolean VXWORKS = false;\n");
#endif
#ifdef _MSC_VER
    fprintf(out, "    public final static boolean _MSC_VER = true;\n");
#else
    fprintf(out, "    public final static boolean _MSC_VER = false;\n");
#endif
    fprintf(out, "\n");

    fprintf(out, "    public JNAPlatformImpl() {\n");
    fprintf(out, "        NativeLibrary jnaNativeLibrary = Native.getLibraryLoading();\n");
    fprintf(out, "    }\n");
    fprintf(out, "    \n");
    fprintf(out, "}\n");
    fprintf(out, "\n\n");

    fclose(out);
    chmod(argv[1], 0444);
}

